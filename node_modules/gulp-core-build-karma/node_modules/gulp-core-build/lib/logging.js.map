{"version":3,"sources":["logging.ts"],"names":[],"mappings":"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","file":"logging.js","sourcesContent":["/* tslint:disable:no-string-literal */\n/* tslint:disable:max-line-length */\nimport * as gutil from 'gulp-util';\nimport * as gulp from 'gulp';\nimport * as path from 'path';\nlet prettyTime = require('pretty-hrtime');\nimport * as state from './State';\nimport { getFlagValue } from './config';\n\nconst WROTE_ERROR_KEY = '__gulpCoreBuildWroteError';\n\ninterface ILocalCache {\n  warnings: string[];\n  errors: string[];\n  taskRun: number;\n  subTasksRun: number;\n  testsRun: number;\n  testsPassed: number;\n  testsFailed: number;\n  testsFlakyFailed: number;\n  testsSkipped: number;\n  taskErrors: number;\n  coverageResults: number;\n  coveragePass: number;\n  coverageTotal: number;\n  totalTaskHrTime: number[];\n  start?: number[];\n  taskCreationTime?: number[];\n  totalTaskSrc: number;\n  wroteSummary: boolean;\n  writingSummary: boolean;\n  writeSummaryCallbacks: Array<() => void>;\n  watchMode?: boolean;\n  fromRunGulp?: boolean;\n  exitCode: number;\n  writeSummaryLogs: string[];\n  gulp: gulp.Gulp;\n  gulpErrorCallback: (err: any) => void;\n  gulpStopCallback: (err: any) => void;\n  errorAndWarningSupressions: { [key: string]: boolean };\n  shouldLogWarningsDuringSummary: boolean;\n  shouldLogErrorsDuringSummary: boolean;\n}\n\nlet wiredUpErrorHandling = false;\nlet duringFastExit = false;\n\nlet globalInstance = global as any;\nlet localCache: ILocalCache = globalInstance.__loggingCache = globalInstance.__loggingCache || {\n  warnings: [],\n  errors: [],\n  testsRun: 0,\n  subTasksRun: 0,\n  testsPassed: 0,\n  testsFailed: 0,\n  testsFlakyFailed: 0,\n  testsSkipped: 0,\n  taskRun: 0,\n  taskErrors: 0,\n  coverageResults: 0,\n  coveragePass: 0,\n  coverageTotal: 0,\n  totalTaskHrTime: null,\n  totalTaskSrc: 0,\n  wroteSummary: false,\n  writingSummary: false,\n  writeSummaryCallbacks: [],\n  exitCode: 0,\n  writeSummaryLogs: [],\n  errorAndWarningSupressions: {},\n  gulp: null,\n  gulpErrorCallback: null,\n  gulpStopCallback: null,\n  shouldLogErrorsDuringSummary: false,\n  shouldLogWarningsDuringSummary: false\n};\n\nif (!localCache.start) {\n  localCache.start = process.hrtime();\n}\n\nwireUpProcessErrorHandling();\n\nfunction isVerbose(): boolean {\n  return getFlagValue('verbose');\n}\n\nfunction formatError(e: any) {\n  'use strict';\n\n  if (!e.err) {\n    if (isVerbose()) {\n      return e.message + '\\r\\n' + e.stack;\n    } else {\n      return e.message;\n    }\n  }\n\n  // PluginError\n  if (typeof e.err.showStack === 'boolean') {\n    return e.err.toString() + (e.err.stack && isVerbose() ? '\\r\\n' + e.err.stack : '');\n  }\n\n  // normal error\n  if (e.err.stack) {\n    if (isVerbose()) {\n      return e.err.stack;\n    } else {\n      return e.err.message;\n    }\n  }\n\n  // unknown (string, number, etc.)\n  if (typeof (Error) === 'undefined') {\n    if (isVerbose()) {\n      return e.message + '\\r\\n' + e.stack;\n    } else {\n      return e.message;\n    }\n  } else {\n    let output = String(e.err);\n\n    try {\n      output = JSON.stringify(e.err);\n    } catch (e) {\n      // Do nothing\n    }\n\n    if (isVerbose()) {\n      return new Error(output)['stack'];\n    } else {\n      return new Error(output)['message'];\n    }\n  }\n}\n\nfunction afterStreamFlushed(streamName: string, callback: () => void) {\n  'use strict';\n  if (duringFastExit) {\n    callback();\n  } else {\n    let stream: NodeJS.WritableStream = process[streamName];\n    let outputWritten = stream.write('');\n    if (outputWritten) {\n      /* tslint:disable:ban-native-functions */\n      setTimeout(() => {\n        callback();\n      }, 250);\n      /* tslint:enable:ban-native-functions */\n    } else {\n      stream.once('drain', () => {\n        /* tslint:disable:ban-native-functions */\n        setTimeout(() => {\n          callback();\n        }, 250);\n        /* tslint:enable:ban-native-functions */\n      });\n    }\n  }\n}\n\nfunction afterStreamsFlushed(callback: () => void) {\n  'use strict';\n  afterStreamFlushed('stdout', () => {\n    afterStreamFlushed('stderr', () => {\n      callback();\n    });\n  });\n}\n\nfunction writeSummary(callback: () => void) {\n  'use strict';\n  let shouldRelogIssues = getFlagValue('relogIssues');\n\n  localCache.writeSummaryCallbacks.push(callback);\n\n  if (!localCache.writingSummary) {\n    localCache.writingSummary = true;\n\n    // flush the log\n    afterStreamsFlushed(() => {\n      log(gutil.colors.magenta('==================[ Finished ]=================='));\n\n      if (shouldRelogIssues && getWarnings().length) {\n        let warnings = getWarnings();\n        for (let x = 0; x < warnings.length; x++) {\n          console.error(gutil.colors.yellow(warnings[x]));\n        }\n      }\n\n      if (shouldRelogIssues && (localCache.taskErrors > 0 || getErrors().length)) {\n        let errors = getErrors();\n        for (let x = 0; x < errors.length; x++) {\n          console.error(gutil.colors.red(errors[x]));\n        }\n      }\n\n      afterStreamsFlushed(() => {\n        for (let writeSummaryString of localCache.writeSummaryLogs) {\n          log(writeSummaryString);\n        }\n        let totalDuration = process.hrtime(getStart());\n\n        log(`Project ${state.builtPackage.name} version:`, gutil.colors.yellow(state.builtPackage.version));\n        log('Build tools version:', gutil.colors.yellow(state.coreBuildPackage.version));\n        log('Node version:', gutil.colors.yellow(process.version));\n        // log('Create tasks duration:', gutil.colors.yellow(prettyTime(localCache.taskCreationTime)));\n        // log('Read src tasks duration:', gutil.colors.yellow(prettyTime(localCache.totalTaskHrTime)));\n        log('Total duration:', gutil.colors.yellow(prettyTime(totalDuration)));\n        // log(`Tasks run: ${gutil.colors.yellow(localCache.taskRun + '')} Subtasks run: ${gutil.colors.yellow(localCache.subTasksRun + '')}`);\n\n        if (localCache.testsRun > 0) {\n          log('Tests results -',\n            'Passed:', gutil.colors.green(localCache.testsPassed + ''),\n            'Failed:', gutil.colors.red(localCache.testsFailed + ''),\n            // 'Flakey:', gutil.colors.yellow(localCache.testsFlakyFailed + ''),\n            'Skipped:', gutil.colors.yellow(localCache.testsSkipped + ''));\n        }\n\n        if (localCache.coverageResults > 0) {\n          log(\n            'Coverage results -',\n            'Passed:', gutil.colors.green(localCache.coveragePass + ''),\n            'Failed:', gutil.colors.red((localCache.coverageResults - localCache.coveragePass) + ''),\n            'Avg. Cov.:', gutil.colors.yellow(Math.floor(localCache.coverageTotal / localCache.coverageResults) + '%'));\n        }\n\n        if (getWarnings().length) {\n          log('Task warnings:', gutil.colors.red(getWarnings().length + '\\r\\n' + getWarnings().join('\\r\\n')));\n        }\n\n        let totalErrors = 0;\n\n        if (localCache.taskErrors > 0 || getErrors().length) {\n          totalErrors = (localCache.taskErrors + getErrors().length);\n          log('Task errors:', gutil.colors.red(totalErrors + ''));\n        }\n\n        localCache.wroteSummary = true;\n        let callbacks = localCache.writeSummaryCallbacks;\n        localCache.writeSummaryCallbacks = [];\n        for (let writeSummaryCallback of callbacks) {\n          writeSummaryCallback();\n        }\n      });\n    });\n  } else if (localCache.wroteSummary) {\n    let callbacks = localCache.writeSummaryCallbacks;\n    localCache.writeSummaryCallbacks = [];\n    for (let writeSummaryCallback of callbacks) {\n      writeSummaryCallback();\n    }\n  }\n}\n\nfunction _writeTaskError(e: any) {\n  'use strict';\n  if (!e || !(e.err && e.err[WROTE_ERROR_KEY])) {\n    writeError(e);\n    localCache.taskErrors++;\n  }\n}\n\nfunction exitProcess(errorCode: number) {\n  'use strict';\n\n  if (!localCache.watchMode) {\n    process.stdout.write('', function() {\n      process.exit(errorCode);\n    });\n  }\n}\n\nfunction wireUpProcessErrorHandling() {\n  'use strict';\n  if (!wiredUpErrorHandling) {\n    wiredUpErrorHandling = true;\n    process.on('exit', function(code: number) {\n      'use strict';\n      duringFastExit = true;\n\n      if (!global.dontWatchExit) {\n        if (!localCache.wroteSummary) {\n          localCache.wroteSummary = true;\n          console.log('About to exit with code:', code);\n          console.error('Process terminated before summary could be written, possible error in async code not continuing!');\n          console.log('Trying to exit with exit code 1');\n          process.exit(1);\n        } else {\n          if (localCache.exitCode !== 0) {\n            console.log(`Exiting with exit code: ${localCache.exitCode}`);\n            process.exit(localCache.exitCode);\n          }\n        }\n      }\n    });\n\n    process.on('uncaughtException',\n      function(err: any) {\n        'use strict';\n        if (isVerbose()) {\n          console.error(err);\n        }\n\n        _writeTaskError(err);\n        writeSummary(() => {\n          exitProcess(1);\n\n          if (localCache.gulp) {\n            localCache.gulp['stop']();\n          }\n\n          if (localCache.gulpErrorCallback) {\n            localCache.gulpErrorCallback(err);\n          }\n        });\n      });\n  }\n}\n\nfunction markErrorAsWritten(error: any) {\n  try {\n    error[WROTE_ERROR_KEY] = true;\n  } catch (e) {\n    // Do Nothing\n  }\n}\n\nexport function logSummary(value: string) {\n  'use strict';\n  localCache.writeSummaryLogs.push(value);\n}\n\nexport function log(...args: Array<string | Chalk.ChalkChain>) {\n  'use strict';\n  gutil.log.apply(this, args);\n}\n\nexport function reset() {\n  'use strict';\n  localCache.start = process.hrtime();\n  localCache.warnings = [];\n  localCache.errors = [];\n  localCache.coverageResults = 0;\n  localCache.coveragePass = 0;\n  localCache.coverageTotal = 0;\n  localCache.taskRun = 0;\n  localCache.subTasksRun = 0;\n  localCache.taskErrors = 0;\n  localCache.totalTaskHrTime = null;\n  localCache.totalTaskSrc = 0;\n  localCache.wroteSummary = false;\n  localCache.writingSummary = false;\n  localCache.writeSummaryCallbacks = [];\n  localCache.testsRun = 0;\n  localCache.testsPassed = 0;\n  localCache.testsFailed = 0;\n  localCache.testsFlakyFailed = 0;\n  localCache.testsSkipped = 0;\n  localCache.writeSummaryLogs = [];\n};\n\nexport enum TestResultState {\n  Passed,\n  Failed,\n  FlakyFailed,\n  Skipped\n}\n\nexport function functionalTestRun(name: string, result: TestResultState, duration: number) {\n  'use strict';\n  localCache.testsRun++;\n\n  switch (result) {\n    case TestResultState.Failed:\n      localCache.testsFailed++;\n      break;\n    case TestResultState.Passed:\n      localCache.testsPassed++;\n      break;\n    case TestResultState.FlakyFailed:\n      localCache.testsFlakyFailed++;\n      break;\n    case TestResultState.Skipped:\n      localCache.testsSkipped++;\n      break;\n  }\n};\n\nexport function endTaskSrc(taskName: string, startHrtime: number[], fileCount: number) {\n  'use strict';\n  localCache.totalTaskSrc++;\n  let taskDuration = process.hrtime(startHrtime);\n  if (!localCache.totalTaskHrTime) {\n    localCache.totalTaskHrTime = taskDuration;\n  } else {\n    localCache.totalTaskHrTime[0] += taskDuration[0];\n    let nanoSecTotal = taskDuration[1] + localCache.totalTaskHrTime[1];\n    if (nanoSecTotal > 1e9) {\n      localCache.totalTaskHrTime[0]++;\n      localCache.totalTaskHrTime[1] = nanoSecTotal - 1e9;\n    } else {\n      localCache.totalTaskHrTime[1] = nanoSecTotal;\n    }\n  }\n\n  log(taskName, 'read src task duration:', gutil.colors.yellow(prettyTime(taskDuration)), `- ${fileCount} files`);\n}\n\nexport function coverageData(coverage: number, threshold: number, filePath: string) {\n  'use strict';\n  localCache.coverageResults++;\n\n  if (coverage < threshold) {\n    error('Coverage:', Math.floor(coverage) + '% (<' + threshold + '%) -', filePath);\n  } else {\n    localCache.coveragePass++;\n  }\n\n  localCache.coverageTotal += coverage;\n}\n\nexport function addSupression(str: string) {\n  'use strict';\n  localCache.errorAndWarningSupressions[str] = true;\n  logSummary(`${gutil.colors.yellow('Supressing')} - ${str}`);\n}\n\nexport function warn(...args: Array<string | Chalk.ChalkChain>) {\n  'use strict';\n  args.splice(0, 0, 'Warning -');\n\n  let stringMessage = args.join(' ');\n\n  if (!localCache.errorAndWarningSupressions[stringMessage]) {\n    localCache.warnings.push(stringMessage);\n    log(gutil.colors.yellow.apply(null, args));\n  }\n};\n\nexport function error(...args: Array<string | Chalk.ChalkChain>) {\n  'use strict';\n  args.splice(0, 0, 'Error -');\n\n  let stringMessage = args.join(' ');\n\n  if (!localCache.errorAndWarningSupressions[stringMessage]) {\n    localCache.errors.push(stringMessage);\n    log(gutil.colors.red.apply(null, args));\n  }\n};\n\nexport function fileError(taskName: string, filePath: string, line: number, column: number, errorCode: string, message: string) {\n  'use strict';\n\n  if (!filePath) {\n    filePath = '<undefined path>';\n  } else if (path.isAbsolute(filePath)) {\n    filePath = path.relative(process.cwd(), filePath);\n  }\n\n  error(`${gutil.colors.cyan(taskName)} - ${filePath}(${line},${column}): error ${errorCode}: ${message}`);\n}\n\nexport function verbose(...args: Array<string | Chalk.ChalkChain>) {\n  'use strict';\n\n  if (getFlagValue('verbose')) {\n    log.apply(null, args);\n  }\n};\n\nexport function generateGulpError(error: any) {\n  if (isVerbose()) {\n    return error;\n  } else {\n    let output = {\n      showStack: false,\n      toString: () => {\n        return '';\n      }\n    };\n\n    markErrorAsWritten(output);\n\n    return output;\n  }\n};\n\nexport function writeError(e: any) {\n  'use strict';\n  if (e) {\n    if (!e[WROTE_ERROR_KEY]) {\n      if (e.err) {\n        if (!e.err[WROTE_ERROR_KEY]) {\n          let msg = formatError(e);\n          let time = prettyTime(e.hrDuration);\n\n          error(\n            '\\'' + gutil.colors.cyan(e.task) + '\\'',\n            gutil.colors.red(e.subTask ? 'sub task errored after' : 'errored after'),\n            gutil.colors.magenta(time),\n            '\\r\\n',\n            msg\n          );\n          markErrorAsWritten(e.err[WROTE_ERROR_KEY]);\n        }\n      } else if (e.fileName) {\n        // This is probably a plugin error\n        if (isVerbose()) {\n          error(\n            e.message,\n            '\\r\\n',\n            e.plugin + ': \\'' + gutil.colors.yellow(e.fileName) + '\\':' + e.lineNumber,\n            '\\r\\n',\n            e.stack\n          );\n        } else {\n          error(\n            e.message,\n            '\\r\\n',\n            e.plugin + ': \\'' + gutil.colors.yellow(e.fileName) + '\\':' + e.lineNumber\n          );\n        }\n      } else {\n        if (isVerbose()) {\n          error(\n            'Unknown',\n            '\\r\\n',\n            gutil.colors.red(e.message),\n            '\\r\\n',\n            e.stack);\n        } else {\n          error(\n            'Unknown',\n            '\\r\\n',\n            gutil.colors.red(e.message));\n        }\n      }\n      markErrorAsWritten(e);\n    }\n  } else {\n    error('Unknown Error Object');\n  }\n};\n\nexport function getWarnings() {\n  'use strict';\n  return localCache.warnings;\n};\n\nexport function getErrors() {\n  'use strict';\n  return localCache.errors;\n};\n\nexport function getStart() {\n  'use strict';\n  return localCache.start;\n};\n\nexport function setWatchMode() {\n  'use strict';\n  localCache.watchMode = true;\n};\n\nexport function getWatchMode() {\n  'use strict';\n  return localCache.watchMode;\n};\n\nexport function setExitCode(exitCode: number) {\n  'use strict';\n  localCache.exitCode = exitCode;\n};\n\nexport function logStartSubtask(name: string) {\n  log(`Starting subtask '${gutil.colors.cyan(name)}'...`);\n  localCache.subTasksRun++;\n}\n\nexport function logEndSubtask(name: string, startTime: number[], errorObject?: any) {\n  let duration = process.hrtime(startTime);\n\n  if (name) {\n    if (!errorObject) {\n      let durationString = prettyTime(duration);\n      log(`Finished subtask '${gutil.colors.cyan(name)}' after ${gutil.colors.magenta(durationString)}`);\n    } else {\n      writeError({\n        err: errorObject,\n        task: name,\n        subTask: true,\n        hrDuration: duration\n      });\n    }\n  }\n}\n\nexport function initialize(gulp: gulp.Gulp, gulpErrorCallback?: (err: any) => void, gulpStopCallback?: (err: any) => void) {\n  'use strict';\n  // This will add logging to the gulp execution\n\n  localCache.gulp = gulp;\n\n  wireUpProcessErrorHandling();\n\n  localCache.gulpErrorCallback = gulpErrorCallback || function() {\n    'use strict';\n    // Do Nothing\n  };\n\n  localCache.gulpStopCallback = gulpStopCallback || function() {\n    'use strict';\n    // Do Nothing\n  };\n\n  gulp['on']('start', function(err: any) {\n    'use strict';\n    log('Starting gulp');\n  });\n\n  gulp['on']('stop', function(err: any) {\n    'use strict';\n    writeSummary(() => {\n      // error if we have any errors or warnings\n      if (localCache.taskErrors > 0 ||\n        getErrors().length ||\n        getWarnings().length ||\n        localCache.testsFailed > 0) {\n        exitProcess(1);\n      }\n\n      localCache.gulpStopCallback(err);\n      exitProcess(0);\n    });\n  });\n\n  gulp['on']('err', function(err: any) {\n    'use strict';\n    _writeTaskError(err);\n    writeSummary(() => {\n      exitProcess(1);\n      localCache.gulpErrorCallback(err);\n    });\n  });\n\n  gulp['on']('task_start', function(e: any) {\n    'use strict';\n    if (localCache.fromRunGulp) {\n      log('Starting', '\\'' + gutil.colors.cyan(e.task) + '\\'...');\n    }\n\n    localCache.taskRun++;\n  });\n\n  gulp['on']('task_stop', function(e: any) {\n    'use strict';\n    let time = prettyTime(e.hrDuration);\n\n    if (localCache.fromRunGulp) {\n      log(\n        'Finished', '\\'' + gutil.colors.cyan(e.task) + '\\'',\n        'after', gutil.colors.magenta(time)\n      );\n    }\n  });\n\n  gulp['on']('task_err', function(err: any) {\n    'use strict';\n    _writeTaskError(err);\n    writeSummary(() => {\n      exitProcess(1);\n    });\n  });\n\n  gulp['on']('task_not_found', function(err: any) {\n    'use strict';\n    log(\n      gutil.colors.red('Task \\'' + err.task + '\\' is not in your gulpfile')\n    );\n    log('Please check the documentation for proper gulpfile formatting');\n    exitProcess(1);\n  });\n};\n\nexport function markTaskCreationTime() {\n  'use strict';\n  localCache.taskCreationTime = process.hrtime(getStart());\n};\n"],"sourceRoot":"/source/"}