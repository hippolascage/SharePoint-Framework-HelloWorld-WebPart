{"version":3,"sources":["local/appBase/components/sp-canvas/canvas/canvasZone/CanvasZone.tsx"],"names":[],"mappings":"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","file":"local/appBase/components/sp-canvas/canvas/canvasZone/CanvasZone.js","sourcesContent":["import * as React from 'react';\r\nimport { css } from 'office-ui-fabric-react/lib/utilities/css';\r\nimport { DisplayMode } from '@microsoft/sp-client-base';\r\nimport { StringHelper } from '@ms/odsp-utilities-bundle';\r\n\r\nimport CanvasControlType from '../../../canvas/canvas/CanvasControlType';\r\nimport { ICanvasContext } from '../canvasComponent/ICanvasComponent';\r\nimport { ICanvasZoneProps } from './ICanvasZone';\r\nimport {\r\n  isEscape,\r\n  isKey,\r\n  KeyCodes\r\n} from '../../a11y/CanvasA11y';\r\nimport SPRte from '../../../sp-rte/rte/SPRte';\r\nimport WebPartZone, { IWebPartZoneProps } from '../../../canvas/sampleCanvasControls/WebPartZone';\r\nimport {  } from '../../../../../common/webParts/IWebPartHost';\r\n\r\nimport { PropertyPaneState } from '../../../../../common/webParts/PropertyPaneDefinitions';\r\nimport './CanvasZone.scss';\r\nimport Strings from '../../loc/CanvasStrings.resx';\r\n\r\nexport default class CanvasZone extends React.Component<ICanvasZoneProps, void> {\r\n  public static contextTypes: React.ValidationMap<CanvasZone> = {\r\n    store: React.PropTypes.object.isRequired\r\n  };\r\n\r\n  /**\r\n   * @ readOnly\r\n   */\r\n  private static _VERTICAL_MARGIN: number = 22;\r\n\r\n  public context: ICanvasContext;\r\n\r\n  private _childControl: SPRte | WebPartZone;\r\n  private _childControlElement: HTMLElement;\r\n  private _domElement: HTMLElement;\r\n  private _toolbarElement: HTMLElement;\r\n  private _trapDiv: HTMLElement;\r\n\r\n  constructor(props: ICanvasZoneProps, context: ICanvasContext) {\r\n    super(props, context);\r\n\r\n    this._handleClickCapture = this._handleClickCapture.bind(this);\r\n    this._handleKeydownCapture = this._handleKeydownCapture.bind(this);\r\n    this._handleMouseOut = this._handleMouseOut.bind(this);\r\n    this._handleMouseOver = this._handleMouseOver.bind(this);\r\n    this._handleToolbarKeydown = this._handleToolbarKeydown.bind(this);\r\n    this._handleTrapFocus = this._handleTrapFocus.bind(this);\r\n    this._handleControlFocus = this._handleControlFocus.bind(this);\r\n    this._selectControl = this._selectControl.bind(this);\r\n  }\r\n\r\n  public shouldComponentUpdate(nextProps: ICanvasZoneProps): boolean {\r\n    const { displayMode, isSelected, row }: ICanvasZoneProps = this.props;\r\n    return (\r\n      displayMode !== nextProps.displayMode ||\r\n      isSelected !== nextProps.isSelected ||\r\n      row !== nextProps.row\r\n    );\r\n  }\r\n\r\n  public componentDidMount(): void {\r\n    if (this.context.store.selectedControlId === this.props.id) {\r\n      // 500ms animation duration\r\n      this.context.store.scrollIntoView('partial', this._domElement, 500, CanvasZone._VERTICAL_MARGIN * 2);\r\n      this.context.store.a11yManager.navigateTo(this._domElement);\r\n    }\r\n\r\n    this._childControl = this.context.store.getControl(this.props.id);\r\n\r\n    if (this.props.displayMode === DisplayMode.Edit) {\r\n      this._toolbarElement.addEventListener('keydown', this._handleToolbarKeydown);\r\n      this._childControlElement.addEventListener('keydown', this._handleKeydownCapture, true);\r\n    }\r\n  }\r\n\r\n  public componentDidUpdate(prevProps: ICanvasZoneProps): void {\r\n    const { displayMode }: ICanvasZoneProps = this.props;\r\n    if (prevProps.displayMode !== displayMode) {\r\n      if (displayMode === DisplayMode.Edit) {\r\n        this._toolbarElement.addEventListener('keydown', this._handleToolbarKeydown);\r\n        this._childControlElement.addEventListener('keydown', this._handleKeydownCapture, true);\r\n      } else if (displayMode === DisplayMode.Read) {\r\n        this._toolbarElement.removeEventListener('keydown', this._handleToolbarKeydown);\r\n        this._childControlElement.removeEventListener('keydown', this._handleKeydownCapture, true);\r\n      }\r\n    }\r\n  }\r\n\r\n  public render(): React.ReactElement<ICanvasZoneProps> {\r\n    const { children, displayMode, isSelected, id }: ICanvasZoneProps = this.props;\r\n    const { controlType }: IWebPartZoneProps = children[0].props;\r\n    const isReadMode: boolean = displayMode === DisplayMode.Read;\r\n\r\n    let accessibleLabel: string = '';\r\n    const ariaPrimaryLabelById: string = `cswpAccessibleLabel_${id}`;\r\n    // Keep ID in sync with BaseClientSideWebpart._renderWithAccessibileTitle,\r\n    // where each webpart can provide contextual info based on its properties:\r\n    // ie. \"image of a house\" instead of just \"image\"\r\n    const ariaContextualLabelId: string = `cswpAccessibleLabelContextual_${id}`;\r\n    // Have to provide multiple IDs because IE doesn't care for aria-describedBy on DIVs\r\n    let ariaLabelledBy: string;\r\n\r\n    if (controlType === CanvasControlType.WebPartZone) {\r\n      // Want additional listed first since it will provide most contextual info\r\n      ariaLabelledBy = ariaContextualLabelId;\r\n    } else if (controlType === CanvasControlType.RTE) {\r\n      accessibleLabel = StringHelper.format(Strings.CanvasZoneAriaWebpartName || '',\r\n        Strings.TextWebPartDisplayName || '') || '';\r\n      // No contextual info available for text\r\n      ariaLabelledBy = ariaPrimaryLabelById;\r\n    }\r\n\r\n    if (displayMode === DisplayMode.Edit) {\r\n      accessibleLabel = StringHelper.format(Strings.AriaWebPartEnterTemplate || '', accessibleLabel) || '';\r\n      if (controlType === CanvasControlType.WebPartZone) {\r\n        ariaLabelledBy += ` ${ariaPrimaryLabelById}`;\r\n      }\r\n    }\r\n\r\n    const zoneClassName: string = css(\r\n      'CanvasZone',\r\n      {\r\n        'CanvasZone--edit': !isReadMode,\r\n        'CanvasZone--selected': isSelected\r\n      }\r\n    );\r\n\r\n    return (\r\n      /**\r\n       * Passing undefined once you set the tab index does not remove the tab index in React 14.\r\n       * This is fixed in React 15. https://github.com/facebook/react/issues/2528\r\n       */\r\n      <div\r\n        aria-labelledby={ariaLabelledBy}\r\n        className={zoneClassName}\r\n        ref={(ref) => this._domElement = ref}\r\n        onMouseOut={this._handleMouseOut}\r\n        onMouseOver={this._handleMouseOver}\r\n        tabIndex={isReadMode ? -1 : 0}\r\n      >\r\n        <div>\r\n          <div\r\n            className='CanvasZone-control'\r\n            isHidden={isReadMode}\r\n            onClickCapture={isReadMode ? undefined : this._handleClickCapture}\r\n            onFocus={isReadMode ? undefined : this._handleControlFocus}\r\n            ref={(ref) => this._childControlElement = ref}\r\n          >\r\n            { children[0] }\r\n          </div>\r\n          <div\r\n            isHidden={isReadMode}\r\n            ref={(ref) => this._toolbarElement = ref}\r\n          >\r\n            { children[1] }\r\n          </div>\r\n          <div id={ariaPrimaryLabelById}\r\n              className='CanvasZone-screenReaderOnly'>\r\n              { accessibleLabel }\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private _handleControlFocus(e: React.FocusEvent): void {\r\n    this._selectControl();\r\n  }\r\n\r\n  private _handleClickCapture(e: React.MouseEvent): void {\r\n    this._selectControl();\r\n  }\r\n\r\n  private _handleKeydownCapture(evt: KeyboardEvent): void {\r\n    if (this._childControl && this._childControl.props.controlType === CanvasControlType.WebPartZone) {\r\n      if (isEscape(evt)) {\r\n        this.context.store.a11yManager.navigateTo(this._domElement);\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n      } else if (isKey(KeyCodes.F10, evt, true)) {\r\n        this.context.store.a11yManager.navigateTo(this._toolbarElement);\r\n        this.context.store.a11yManager.ariaAlert(Strings.ToolbarNavigationArrowKeys);\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n      } else if (isKey(KeyCodes.P, evt, true)) {\r\n        this.context.store.webPartManager.configureStart(this._childControl.props.id, PropertyPaneState.Open);\r\n\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n      } else {\r\n        this.context.store.a11yManager.skipEvent(evt);\r\n      }\r\n    }\r\n  }\r\n\r\n  private _handleToolbarKeydown(evt: KeyboardEvent): void {\r\n    if (this._childControl && this._childControl.props.controlType === CanvasControlType.RTE) {\r\n      // Only for RTE: pressing escape on toolbar takes the focus inside the editor\r\n      if (isEscape(evt)) {\r\n        this._childControl.focus();\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n      }\r\n    }\r\n  }\r\n\r\n  private _handleMouseOut(e: React.MouseEvent): void {\r\n    this.context.store.hoveredControlId = undefined;\r\n  }\r\n\r\n  private _handleMouseOver(e: React.MouseEvent): void {\r\n    this.context.store.hoveredControlId = this.props.id;\r\n  }\r\n\r\n  private _handleTrapFocus(e: React.FocusEvent): void {\r\n    if (e.target === this._trapDiv) {\r\n      this._childControl.focus();\r\n    }\r\n  }\r\n\r\n  private _selectControl(): void {\r\n    if (this.context.store.selectedControlId !== this.props.id) {\r\n      this.context.store.selectedControlId = this.props.id;\r\n    }\r\n  }\r\n\r\n}"],"sourceRoot":"/src"}