{"version":3,"sources":["TextTask.ts"],"names":[],"mappings":";;;;;;AAAA,gCAAyB,iBAAiB,CAAC,CAAA;AAO3C;IAA8B,4BAAyB;IAAvD;QAA8B,8BAAyB;QAC9C,SAAI,GAAW,MAAM,CAAC;QACtB,eAAU,GAAoB;YACnC,SAAS,EAAE,CAAC,cAAc,CAAC;SAC5B,CAAC;IA6BJ,CAAC;IA3BQ,8BAAW,GAAlB,UAAmB,IAAmB;QACpC,4BAA4B;QAC5B,IAAM,KAAK,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;QAChC,IAAM,QAAQ,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC;QAClC,yCAAS,CAAqB;QACtC,IAAA,qBAAoD,EAA5C,wBAAS,EAAE,8BAAY,CAAsB;QACrD,2BAA2B;QAE3B,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;YACd,IAAM,kBAAkB,GAA2B,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC;iBACnE,IAAI,CAAC,QAAQ,CAAC;gBACb,QAAQ,EAAE,kCAAkC;aAC7C,CAAC,CAAC;iBACF,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YAE9B,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;gBACjB,MAAM,CAAC,KAAK,CACV,kBAAkB,EAClB,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC;qBAChB,IAAI,CAAC,QAAQ,EAAE,CAAC;qBAChB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CACjC,CAAC;YACJ,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,MAAM,CAAC,kBAAkB,CAAC;YAC5B,CAAC;QACH,CAAC;IACH,CAAC;IACH,eAAC;AAAD,CAjCA,AAiCC,CAjC6B,0BAAQ,GAiCrC;AAjCY,gBAAQ,WAiCpB,CAAA","file":"TextTask.js","sourcesContent":["import { GulpTask } from 'gulp-core-build';\nimport gulpType = require('gulp');\n\nexport interface ITextTaskConfig {\n  textMatch?: string[];\n}\n\nexport class TextTask extends GulpTask<ITextTaskConfig> {\n  public name: string = 'text';\n  public taskConfig: ITextTaskConfig = {\n    textMatch: ['src/**/*.txt']\n  };\n\n  public executeTask(gulp: gulpType.Gulp): NodeJS.ReadWriteStream {\n    /* tslint:disable:typedef */\n    const merge = require('merge2');\n    const texttojs = require('gulp-texttojs');\n    const { textMatch } = this.taskConfig;\n    const { libFolder, libAMDFolder } = this.buildConfig;\n    /* tslint:enable:typedef */\n\n    if (textMatch) {\n      const commonJSTextStream: NodeJS.ReadWriteStream = gulp.src(textMatch)\n        .pipe(texttojs({\n          template: 'module.exports = <%= content %>;'\n        }))\n        .pipe(gulp.dest(libFolder));\n\n      if (libAMDFolder) {\n        return merge(\n          commonJSTextStream,\n          gulp.src(textMatch)\n            .pipe(texttojs())\n            .pipe(gulp.dest(libAMDFolder))\n        );\n      } else {\n        return commonJSTextStream;\n      }\n    }\n  }\n}\n"],"sourceRoot":"/source/"}