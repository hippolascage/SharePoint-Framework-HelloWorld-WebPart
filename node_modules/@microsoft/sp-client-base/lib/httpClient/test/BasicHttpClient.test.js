"use strict";
var ServiceScope_1 = require('../../serviceScope/ServiceScope');
var BasicHttpClient_1 = require('../BasicHttpClient');
var MockFetchProvider_1 = require('./MockFetchProvider');
var FetchProvider_1 = require('../FetchProvider');
var assert = chai.assert;
describe('BasicHttpClient tests', function () {
    describe('Test simple requests', function () {
        var rootScope = ServiceScope_1.default.startNewRoot();
        var fetchProvider = new MockFetchProvider_1.default(rootScope);
        rootScope.provide(FetchProvider_1.fetchProviderServiceKey, fetchProvider);
        rootScope.finish();
        var basicHttpClient = new BasicHttpClient_1.default(rootScope);
        it('should NOT add headers for a basic GET request', function (done) {
            fetchProvider.expect({
                expectedUrl: 'http://example.com/_api/test01',
                requestAssertions: function (request) {
                    var headerCount = 0;
                    request.headers.forEach(function (value, name) { ++headerCount; });
                    assert.equal(headerCount, 0);
                },
                responseObject: { 'data': 123 }
            });
            basicHttpClient.get('http://example.com/_api/test01')
                .then(function (response) {
                return response.json();
            }).then(function (responseObject) {
                assert.equal(responseObject.data, 123);
                done();
            }).catch(function (error) {
                done(error);
            });
        });
    });
});

//# sourceMappingURL=BasicHttpClient.test.js.map
