{"version":3,"sources":["components/Callout/Callout.tsx"],"names":[],"mappings":"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","file":"components/Callout/Callout.js","sourcesContent":["import * as React from 'react';\nimport { ICalloutProps } from './Callout.Props';\nimport { DirectionalHint } from '../../common/DirectionalHint';\nimport { Layer } from '../../Layer';\nimport { css } from '../../utilities/css';\nimport { EventGroup } from '../../utilities/eventGroup/EventGroup';\nimport { getRelativePositions, IPositionInfo } from '../../utilities/positioning';\nimport './Callout.scss';\n\nconst BEAK_ORIGIN_POSITION = { top: 0, left: 0 };\nconst OFF_SCREEN_POSITION = { top: -9999, left: 0 };\n\nexport interface ICalloutState {\n  positions?: any;\n  slideDirectionalClassName?: string;\n  calloutElementRect?: ClientRect;\n}\n\nexport class Callout extends React.Component<ICalloutProps, ICalloutState> {\n\n  public static defaultProps = {\n    isBeakVisible: true,\n    beakStyle: 'ms-Callout-beak',\n    beakWidth: 28,\n    gapSpace: 16,\n    directionalHint: DirectionalHint.rightCenter\n  };\n\n  private _hostElement: HTMLDivElement;\n  private _calloutElement: HTMLDivElement;\n  private _events: EventGroup;\n\n  constructor(props: ICalloutProps) {\n    super(props);\n\n    this.state = {\n      positions: null,\n      slideDirectionalClassName: null,\n      calloutElementRect: null\n    };\n\n    this._events = new EventGroup(this);\n\n    this._onLayerDidMount = this._onLayerDidMount.bind(this);\n  }\n\n  public componentDidUpdate() {\n    this._updatePosition();\n  }\n\n  public componentDidMount() {\n    if (this.props.doNotLayer) {\n      this._onLayerDidMount();\n    }\n  }\n\n  public componentWillUnmount() {\n    this._events.dispose();\n  }\n\n  public render() {\n    let { className, targetElement, isBeakVisible, beakStyle, children } = this.props;\n    let { positions, slideDirectionalClassName } = this.state;\n    let content = (\n      <div ref={ (host: HTMLDivElement) => this._hostElement = host } className={ 'ms-Callout-container' }>\n        <div\n          className={ css('ms-Callout', className, slideDirectionalClassName ? `ms-u-${ slideDirectionalClassName }` : '') }\n          style={ ((positions) ? positions.callout : OFF_SCREEN_POSITION) }\n          ref={ (callout: HTMLDivElement) => this._calloutElement = callout }\n          >\n          { isBeakVisible && targetElement ? (<div className={ beakStyle }  style={ ((positions) ? positions.beak : BEAK_ORIGIN_POSITION) } />) : (null) }\n          <div className='ms-Callout-main'>\n            { children }\n          </div>\n        </div>\n      </div>\n    );\n    return this.props.doNotLayer ? content : (\n      <Layer onLayerMounted={ this._onLayerDidMount }>\n        { content }\n      </Layer>\n    );\n  }\n\n  public dismiss() {\n    let { onDismiss } = this.props;\n\n    if (onDismiss) {\n      onDismiss();\n    }\n  }\n\n  private _dismissOnLostFocus(ev: Event) {\n    let { targetElement } = this.props;\n    let target = ev.target as HTMLElement;\n\n    if (ev.target !== window &&\n      this._hostElement &&\n      !this._hostElement.contains(target) &&\n      (!targetElement || !targetElement.contains(target))) {\n      this.dismiss();\n    }\n  }\n\n  private _onLayerDidMount() {\n    // This is added so the callout will dismiss when the window is scrolled\n    // but not when something inside the callout is scrolled.\n    this._events.on(window, 'scroll', this._dismissOnLostFocus, true);\n    this._events.on(window, 'resize', this.dismiss, true);\n    this._events.on(window, 'focus', this._dismissOnLostFocus, true);\n    this._events.on(window, 'click', this._dismissOnLostFocus, true);\n\n    if (this.props.onLayerMounted) {\n      this.props.onLayerMounted();\n    }\n\n    this._updatePosition();\n  }\n\n  private _updatePosition() {\n    let { positions } = this.state;\n    let hostElement: HTMLElement = this._hostElement;\n    let calloutElement: HTMLElement = this._calloutElement;\n\n    if (hostElement && calloutElement) {\n      let positionInfo: IPositionInfo = getRelativePositions(this.props, hostElement, calloutElement);\n\n      // Set the new position only when the positions are not exists or one of the new callout positions are different\n      if ((!positions && positionInfo) ||\n        (positions && positionInfo && (positions.callout.top !== positionInfo.calloutPosition.top || positions.callout.left !== positionInfo.calloutPosition.left))) {\n\n        this.setState({\n          positions: {\n            callout: positionInfo.calloutPosition,\n            beak: positionInfo.beakPosition,\n          },\n          slideDirectionalClassName: positionInfo.directionalClassName\n        });\n      }\n    }\n  }\n}\n"],"sourceRoot":"/src"}