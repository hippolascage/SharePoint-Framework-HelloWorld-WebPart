{"version":3,"sources":["components/Breadcrumb/Breadcrumb.tsx"],"names":[],"mappings":"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","file":"components/Breadcrumb/Breadcrumb.js","sourcesContent":["import * as React from 'react';\nimport { BaseComponent } from '../../common/BaseComponent';\nimport { FocusZone, FocusZoneDirection } from '../../FocusZone';\nimport { ContextualMenu } from '../../ContextualMenu';\nimport { IBreadcrumbProps, IBreadcrumbItem } from './Breadcrumb.Props';\nimport { DirectionalHint } from '../../common/DirectionalHint';\nimport { getRTL } from '../../utilities/rtl';\nimport { getId } from '../../utilities/object';\nimport { css } from '../../utilities/css';\nimport './Breadcrumb.scss';\n\nexport interface IBreadcrumbState {\n  isOverflowOpen: boolean;\n  overflowAnchor?: HTMLElement;\n  renderedItems?: IBreadcrumbItem[];\n  renderedOverflowItems?: IBreadcrumbItem[];\n}\n\nconst OVERFLOW_KEY = 'overflow';\nconst OVERFLOW_WIDTH = 44;\n\nexport class Breadcrumb extends BaseComponent<IBreadcrumbProps, IBreadcrumbState> {\n  public static defaultProps: IBreadcrumbProps = {\n    items: [],\n    maxDisplayedItems: 999\n  };\n\n  public refs: {\n    [key: string]: React.ReactInstance;\n    renderingArea: HTMLElement;\n  };\n\n  private _breadcrumbItemWidths: { [key: string]: number };\n  private _id: string;\n\n  constructor(props: IBreadcrumbProps) {\n    super(props);\n\n    this._id = getId('Breadcrumb');\n    this.state = this._getStateFromProps(props);\n  }\n\n  public componentDidMount() {\n    this._updateItemMeasurements();\n    this._updateRenderedItems();\n\n    this._events.on(window, 'resize', this._updateRenderedItems);\n  }\n\n  public componentWillReceiveProps(nextProps: IBreadcrumbProps) {\n    this.setState(this._getStateFromProps(nextProps));\n    this._breadcrumbItemWidths = null;\n  }\n\n  public componentDidUpdate(prevProps: IBreadcrumbProps, prevStates: IBreadcrumbState) {\n    if (!this._breadcrumbItemWidths) {\n      this._updateItemMeasurements();\n      this._updateRenderedItems();\n    }\n  }\n\n  public render() {\n    let { className } = this.props;\n    let { isOverflowOpen, overflowAnchor, renderedItems, renderedOverflowItems } = this.state;\n    let overflowMenuId = this._id + '-overflow';\n\n    return (\n      <div className={ css('ms-Breadcrumb', className) } ref='renderingArea'>\n        <FocusZone direction={ FocusZoneDirection.horizontal }>\n          <ul className='ms-Breadcrumb-list'>\n          { renderedOverflowItems && renderedOverflowItems.length ? (\n            <li className='ms-Breadcrumb-overflow' key={ OVERFLOW_KEY } ref={ OVERFLOW_KEY }>\n              <div className='ms-Breadcrumb-overflowButton ms-Icon ms-Icon--ellipsis'\n                  onClick={ this._onOverflowClicked.bind(this) }\n                  data-is-focusable={ true }\n                  role='button'\n                  aria-haspopup='true'\n                  aria-owns={ isOverflowOpen ? overflowMenuId : null } />\n              <i className={ css('ms-Breadcrumb-chevron ms-Icon', getRTL() ? 'ms-Icon--chevronLeft' : 'ms-Icon--chevronRight') }></i>\n            </li>\n          ) : (null) }\n          { renderedItems.map(\n                (item, index) => (\n             <li className='ms-Breadcrumb-listItem' key={ item.key || String(index) } ref={ item.key || String(index) } >\n              <a className='ms-Breadcrumb-itemLink'\n                  onClick={ item.onClick ? this._onBreadcrumbClicked.bind(this, item) : null }\n                  href={ item.href }\n                  role={ item.onClick ? 'button' : 'link' }>\n                  { item.text }\n                  </a>\n              <i className={ css('ms-Breadcrumb-chevron ms-Icon', getRTL() ? 'ms-Icon--chevronLeft' : 'ms-Icon--chevronRight') }></i>\n            </li>\n          )) }\n          </ul>\n        </FocusZone>\n        { isOverflowOpen ? (\n          <ContextualMenu\n            targetElement={ overflowAnchor }\n            isBeakVisible={ true }\n            items={ renderedOverflowItems.map(\n                (item, index) => ({\n                  name: item.text,\n                  key: item.key,\n                  onClick: this._onBreadcrumbClicked.bind(this, item),\n                  href: item.href\n                })\n              ) }\n            id={ overflowMenuId }\n            directionalHint={ DirectionalHint.bottomLeftEdge }\n            onDismiss={ this._onOverflowDismissed.bind(this) } />\n        ) : (null) }\n      </div>\n    );\n  }\n\n  private _onOverflowClicked(ev: MouseEvent) {\n    this.setState({\n      'isOverflowOpen' : !this.state.isOverflowOpen,\n      'overflowAnchor' : ev.currentTarget as HTMLElement\n    });\n  }\n\n  private _onOverflowDismissed(ev: MouseEvent) {\n    this.setState({\n      'isOverflowOpen' : false,\n      'overflowAnchor' : null\n    });\n  }\n\n  private _onBreadcrumbClicked(item: IBreadcrumbItem, ev: MouseEvent) {\n    if (item.onClick) {\n      item.onClick(item.key);\n    }\n    this.setState({\n      'isOverflowOpen': false\n    });\n  }\n\n  private _updateItemMeasurements() {\n    let { items } = this.props;\n\n    if (!this._breadcrumbItemWidths) {\n      this._breadcrumbItemWidths = {};\n    }\n\n    for (let i = 0; i < items.length; i++) {\n      let item = items[i];\n\n      if (!this._breadcrumbItemWidths[item.key]) {\n        let el = this.refs[item.key] as HTMLElement;\n\n        this._breadcrumbItemWidths[item.key] = el.getBoundingClientRect().width;\n      }\n    }\n  }\n\n  private _updateRenderedItems() {\n    let { items, maxDisplayedItems } = this.props;\n    let renderingArea = this.refs.renderingArea;\n    let renderedItems = [];\n    let renderedOverflowItems = [].concat(items);\n    let consumedWidth = 0;\n\n    let style = window.getComputedStyle(renderingArea);\n    let availableWidth = renderingArea.clientWidth - parseInt(style.marginLeft, 10) - parseInt(style.marginRight, 10);\n\n    availableWidth -= OVERFLOW_WIDTH;\n\n    let i;\n    let minIndex = Math.max(0, renderedOverflowItems.length - maxDisplayedItems);\n\n    for (i = renderedOverflowItems.length - 1; i >= minIndex; i--) {\n      let item = renderedOverflowItems[i];\n      let itemWidth = this._breadcrumbItemWidths[item.key];\n\n      if ((consumedWidth + itemWidth) >= availableWidth) {\n        break;\n      } else {\n        consumedWidth += itemWidth;\n      }\n    }\n\n    renderedItems = renderedOverflowItems.splice(i + 1);\n\n    this.setState({\n      isOverflowOpen: this.state.isOverflowOpen,\n      overflowAnchor: this.state.overflowAnchor,\n      renderedItems: renderedItems,\n      renderedOverflowItems: renderedOverflowItems,\n    });\n  }\n\n  private _getStateFromProps(nextProps: IBreadcrumbProps) {\n    return {\n      isOverflowOpen: false,\n      overflowAnchor: null,\n      renderedItems: nextProps.items || [],\n      renderedOverflowItems: null\n    };\n  }\n\n}\n"],"sourceRoot":"/src"}