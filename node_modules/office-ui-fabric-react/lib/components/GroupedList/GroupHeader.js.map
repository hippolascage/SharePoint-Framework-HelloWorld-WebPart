{"version":3,"sources":["components/GroupedList/GroupHeader.tsx"],"names":[],"mappings":"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","file":"components/GroupedList/GroupHeader.js","sourcesContent":["import * as React from 'react';\nimport {\n  IGroupHeaderProps,\n  IGroup\n} from './index';\nimport { Check } from '../Check/Check';\nimport { GroupSpacer } from './GroupSpacer';\nimport { Spinner } from '../../Spinner';\nimport { FocusZone, FocusZoneDirection } from '../../FocusZone';\nimport { css } from '../../utilities/css';\nimport { IViewport } from '../../utilities/decorators/withViewport';\nimport './GroupHeader.scss';\n\nexport interface IGroupHeader {\n  group: IGroup;\n  groupIndex: number;\n  groupLevel: number;\n  headerProps?: IGroupHeaderProps;\n  viewport?: IViewport;\n  canSelectGroup?: boolean;\n}\n\nexport interface IGroupHeaderState {\n  isCollapsed: boolean;\n  isLoadingVisible: boolean;\n}\n\nexport class GroupHeader extends React.Component<IGroupHeader, IGroupHeaderState> {\n  constructor(props: IGroupHeader) {\n    super(props);\n\n    this._onToggleCollapse = this._onToggleCollapse.bind(this);\n    this._onToggleSelectGroup = this._onToggleSelectGroup.bind(this);\n    this._onHeaderClick = this._onHeaderClick.bind(this);\n\n    this.state = {\n      isCollapsed: this.props.group && this.props.group.isCollapsed,\n      isLoadingVisible: false\n    };\n  }\n\n  public componentWillReceiveProps(newProps) {\n    if (newProps.group) {\n      let newCollapsed = newProps.group.isCollapsed;\n      let isGroupLoading = newProps.headerProps && newProps.headerProps.isGroupLoading;\n      let newLoadingVisible = !newCollapsed && isGroupLoading && isGroupLoading(newProps.group);\n\n      this.setState({\n        isCollapsed: newCollapsed,\n        isLoadingVisible: newLoadingVisible\n      });\n    }\n  }\n\n  public render() {\n    let {\n      group,\n      groupLevel,\n      headerProps,\n      viewport,\n      canSelectGroup\n    } = this.props;\n    let { isCollapsed, isLoadingVisible } = this.state;\n    let loadingText = headerProps && headerProps.loadingText;\n    let isCollapsedGroupSelectVisible = headerProps && headerProps.isCollapsedGroupSelectVisible;\n    if (isCollapsedGroupSelectVisible === undefined) {\n      isCollapsedGroupSelectVisible = true;\n    }\n    let isSelectionCheckVisible = canSelectGroup && (isCollapsedGroupSelectVisible || !(group && group.isCollapsed));\n    let isSelected = group && group.isSelected && isSelectionCheckVisible;\n\n    return group && (\n      <div\n        className={ css('ms-GroupHeader', {\n          'is-selected': isSelected\n        }) }\n        style={ viewport ? { minWidth: viewport.width } : {} }\n        onClick={ this._onHeaderClick }\n        data-is-focusable={ true } >\n\n        <FocusZone direction={ FocusZoneDirection.horizontal }>\n\n          { isSelectionCheckVisible ? (\n            <button\n              className='ms-GroupHeader-check'\n              data-selection-toggle={ true }\n              onClick={ this._onToggleSelectGroup } >\n              <Check isChecked={ isSelected } />\n            </button>\n            ) : ( GroupSpacer({ count: 1 }) )\n          }\n\n          { GroupSpacer({ count: groupLevel }) }\n\n          <button className='ms-GroupHeader-expand' onClick={ this._onToggleCollapse }>\n            <i className={ css('ms-Icon ms-Icon--chevronDown', {\n              'is-collapsed': isCollapsed\n            })} />\n          </button>\n\n          <div className='ms-GroupHeader-title ms-font-xl'>\n            <span>{ group.name } </span>\n            <span>({ group.count })</span>\n          </div>\n\n          <div className={ css('ms-GroupHeader-loading', { 'is-loading': isLoadingVisible }) }>\n            <Spinner label={ loadingText } />\n          </div>\n\n        </FocusZone>\n      </div>\n    );\n  }\n\n  private _onToggleCollapse(ev: React.MouseEvent) {\n    let { group, headerProps } = this.props;\n    let { isCollapsed } = this.state;\n    let onToggleCollapse = headerProps && headerProps.onToggleCollapse;\n    let isGroupLoading = headerProps && headerProps.isGroupLoading;\n\n    let newCollapsed = !isCollapsed;\n    let newLoadingVisible = !newCollapsed && isGroupLoading && isGroupLoading(group);\n\n    this.setState({\n      isCollapsed: newCollapsed,\n      isLoadingVisible: newLoadingVisible\n    });\n    if (onToggleCollapse) {\n      onToggleCollapse(group);\n    }\n\n    ev.stopPropagation();\n    ev.preventDefault();\n  }\n\n  private _onToggleSelectGroup(ev: React.MouseEvent) {\n    let { group, headerProps } = this.props;\n    let onToggleSelectGroup = headerProps && headerProps.onToggleSelectGroup;\n\n    if (onToggleSelectGroup) {\n      onToggleSelectGroup(group);\n    }\n\n    ev.preventDefault();\n    ev.stopPropagation();\n  }\n\n  private _onHeaderClick() {\n    let { group, headerProps } = this.props;\n\n    if (headerProps) {\n      let { onGroupHeaderClick, onToggleSelectGroup } = headerProps;\n      if (onGroupHeaderClick) {\n        onGroupHeaderClick(group);\n      } else if (onToggleSelectGroup) {\n        onToggleSelectGroup(group);\n      }\n    }\n  }\n}\n"],"sourceRoot":"/src"}