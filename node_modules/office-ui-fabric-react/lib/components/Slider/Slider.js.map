{"version":3,"sources":["components/Slider/Slider.tsx"],"names":[],"mappings":";;;;;;AAAA,IAAY,KAAK,WAAM,OAAO,CAAC,CAAA;AAC/B,QAAO,eAAe,CAAC,CAAA;AAEvB,8BAA8B,4BAA4B,CAAC,CAAA;AAC3D,yBAAyB,0BAA0B,CAAC,CAAA;AACpD,sBAAsB,aAAa,CAAC,CAAA;AACpC,oBAAoB,qBAAqB,CAAC,CAAA;AAC1C,oBAAmD,qBAAqB,CAAC,CAAA;AACzE,uBAAsB,wBAAwB,CAAC,CAAA;AAO/C,WAAY,aAAa;IACvB,yDAAQ,CAAA;IACR,iDAAI,CAAA;AACN,CAAC,EAHW,qBAAa,KAAb,qBAAa,QAGxB;AAHD,IAAY,aAAa,GAAb,qBAGX,CAAA;AAED;IAA4B,0BAAyC;IAkBnE,gBAAY,KAAoB;QAC9B,kBAAM,KAAK,CAAC,CAAC;QAEb,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACzE,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACvE,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACjE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE7C,IAAI,CAAC,GAAG,GAAG,cAAK,CAAC,QAAQ,CAAC,CAAC;QAE3B,IAAI,KAAK,GAAG,KAAK,CAAC,KAAK,IAAI,KAAK,CAAC,YAAY,IAAI,KAAK,CAAC,GAAG,CAAC;QAE3D,IAAI,CAAC,KAAK,GAAG;YACX,KAAK,EAAE,KAAK;YACZ,aAAa,EAAE,KAAK;SACrB,CAAC;IACJ,CAAC;IAED;;OAEG;IACI,0CAAyB,GAAhC,UAAiC,QAAsB;QAErD,EAAE,CAAC,CAAC,QAAQ,CAAC,KAAK,KAAK,SAAS,CAAC,CAAC,CAAC;YACjC,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;YAE3E,IAAI,CAAC,QAAQ,CAAC;gBACZ,KAAK,EAAE,KAAK;aACb,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IAEM,uBAAM,GAAb;QACE,IAAA,eAAiF,EAAzE,YAAG,EAAE,YAAG,EAAE,gBAAK,EAAE,wBAAS,EAAE,sBAAQ,EAAE,wBAAS,EAAE,wBAAS,CAAgB;QAClF,IAAA,eAA2C,EAAnC,gBAAK,EAAE,gCAAa,CAAgB;QAC5C,IAAM,kBAAkB,GAAW,CAAC,aAAa,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC;QAE7E,IAAM,eAAe,GAAO,QAAQ,GAAG,EAAE,GAAG,EAAE,WAAW,EAAE,IAAI,CAAC,wBAAwB,EAAE,CAAC;QAC3F,IAAM,gBAAgB,GAAO,QAAQ,GAAG,EAAE,GAAG,EAAE,YAAY,EAAE,IAAI,CAAC,wBAAwB,EAAE,CAAC;QAC7F,IAAM,aAAa,GAAO,QAAQ,GAAG,EAAE,GAAG,EAAE,SAAS,EAAE,IAAI,CAAC,UAAU,EAAE,CAAC;QAEzE,MAAM,CAAC,CACL,qBAAC,GAAG,IACF,SAAS,EAAG,SAAG,CAAC,WAAW,EAAE,SAAS,EAAE;YACtC,mBAAmB,EAAE,CAAC,QAAQ;YAC9B,oBAAoB,EAAE,QAAQ;SAC/B,CAAE,EACH,GAAG,EAAC,MAAM,GACR,KAAK,IAAI,CACX,oBAAC,aAAK,qBAAM,SAAS,GAAG,EAAE,GAAG,EAAC,SAAS,EAAG,IAAI,CAAC,GAAG,EAAC,GAC/C,KAAO,CACH,CACL,EACH,qBAAC,GAAG,IAAC,SAAS,EAAC,qBAAqB,GAClC,qBAAC,GAAG,mBACF,SAAS,EAAG,SAAG,CAAC,oBAAoB,EAAE;YACpC,qBAAqB,EAAE,SAAS;YAChC,2BAA2B,EAAE,CAAE,aAAa,KAAK,KAAK,CAAE;SACzD,CAAE,GACE,QAAQ,GAAG,EAAG,GAAG,EAAE,UAAU,EAAE,CAAC,EAAE,GACvC,EAAE,EAAG,IAAI,CAAC,GAAK,EACf,IAAI,EAAC,QAAQ,GACb,aAAa,GAAG,KAAO,GACvB,aAAa,GAAG,GAAK,GACrB,aAAa,GAAG,GAAK,GAChB,eAAe,EACf,gBAAgB,EAChB,aAAa,GAElB,qBAAC,GAAG,IACF,GAAG,EAAC,YAAY,EAChB,SAAS,EAAC,gBAAgB,GAE1B,qBAAC,IAAI,mBACH,GAAG,EAAC,OAAO,EACX,SAAS,EAAC,iBAAiB,GACtB,SAAS,GAAG,EAAE,YAAY,EAAG,SAAS,EAAE,GAAG,EAAG,GACnD,KAAK,EAAG,YAAK,EAAE;YACb,EAAE,OAAO,EAAE,kBAAkB,GAAG,GAAG,EAAE;YACrC,EAAE,MAAM,EAAE,kBAAkB,GAAG,GAAG,EAAI,GACxC,EACF,qBAAC,IAAI,IAAC,SAAS,EAAC,kBAAkB,EAAC,KAAK,EAAG,EAAC,OAAO,EAAE,kBAAkB,GAAG,GAAG,EAAG,EAAQ,EACxF,qBAAC,IAAI,IAAC,SAAS,EAAC,oBAAoB,EAAC,KAAK,EAAG,EAAC,OAAO,EAAE,CAAC,GAAG,GAAG,kBAAkB,CAAC,GAAG,GAAG,EAAG,EAAQ,CAC9F,CACF,EACJ,SAAS,IAAI,qBAAC,KAAK,IAAC,SAAS,EAAC,0BAA0B,GAAG,KAAO,CAAU,CAC1E,CACF,CACmB,CAAC;IAC9B,CAAC;IAEM,sBAAK,GAAZ;QACI,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;YAClB,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;QAC5B,CAAC;IACL,CAAC;IAED,sBAAW,yBAAK;aAAhB;YACE,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;QAC1B,CAAC;;;OAAA;IAEO,yCAAwB,GAAhC,UAAiC,KAA8B;QAC7D,EAAE,CAAC,CAAC,KAAK,CAAC,IAAI,KAAK,WAAW,CAAC,CAAC,CAAC;YAC/B,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,MAAM,EAAE,WAAW,EAAE,IAAI,CAAC,uBAAuB,EAAE,IAAI,CAAC,CAAC;YACzE,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,MAAM,EAAE,SAAS,EAAE,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;QACtE,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,IAAI,KAAK,YAAY,CAAC,CAAC,CAAC;YACvC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,MAAM,EAAE,WAAW,EAAE,IAAI,CAAC,uBAAuB,EAAE,IAAI,CAAC,CAAC;YACzE,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,MAAM,EAAE,UAAU,EAAE,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;QACvE,CAAC;QAED,IAAI,CAAC,uBAAuB,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;IAC5C,CAAC;IAEO,wCAAuB,GAA/B,UAAgC,KAA8B,EAAE,wBAAkC;QAChG,IAAA,eAA+C,EAAvC,YAAG,EAAE,YAAG,EAAE,cAAI,EAAE,sBAAQ,CAAgB;QAChD,IAAM,KAAK,GAAW,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC;QACzC,IAAM,YAAY,GAAW,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC;QAC9D,IAAM,UAAU,GAAW,YAAY,GAAG,KAAK,CAAC;QAChD,IAAM,kBAAkB,GAAe,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,qBAAqB,EAAE,CAAC;QACpF,IAAI,YAAoB,CAAC;QAEzB,EAAE,CAAC,CAAC,KAAK,CAAC,IAAI,KAAK,WAAW,IAAI,KAAK,CAAC,IAAI,KAAK,WAAW,CAAC,CAAC,CAAC;YAC7D,YAAY,GAAG,YAAK,EAAE;gBACpB,CAAC,kBAAkB,CAAC,KAAK,GAAI,KAAoB,CAAC,OAAO,CAAC,GAAG,UAAU;gBACvE,CAAE,KAAoB,CAAC,OAAO,GAAG,kBAAkB,CAAC,IAAI,CAAC,GAAG,UAAU,CAAC;QAC3E,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,IAAI,KAAK,YAAY,IAAI,KAAK,CAAC,IAAI,KAAK,WAAW,CAAC,CAAC,CAAC;YACrE,YAAY,GAAG,YAAK,EAAE;gBACpB,CAAC,kBAAkB,CAAC,KAAK,GAAI,KAAoB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,UAAU;gBAClF,CAAE,KAAoB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,kBAAkB,CAAC,IAAI,CAAC,GAAG,UAAU,CAAC;QACtF,CAAC;QAED,IAAI,YAAoB,CAAC;QACzB,IAAI,aAAqB,CAAC;QAE1B,iEAAiE;QACjE,EAAE,CAAC,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACrC,aAAa,GAAG,YAAY,GAAG,GAAG,CAAC;QACrC,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC,CAAC;YAC5B,aAAa,GAAG,YAAY,GAAG,GAAG,CAAC;QACrC,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,aAAa,GAAG,GAAG,GAAG,IAAI,GAAG,YAAY,CAAC;YAC1C,YAAY,GAAG,GAAG,GAAG,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;QACvD,CAAC;QAED,IAAI,CAAC,QAAQ,CAAC;YACZ,KAAK,EAAE,YAAY;YACnB,aAAa,EAAE,aAAa;SAC7B,CAAC,CAAC;QACH,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;YACb,QAAQ,CAAC,YAAY,CAAC,CAAC;QACzB,CAAC;QAED,EAAE,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,CAAC;YAC9B,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,KAAK,CAAC,eAAe,EAAE,CAAC;QAC1B,CAAC;IACH,CAAC;IAEO,qCAAoB,GAA5B;QACE,IAAI,CAAC,QAAQ,CAAC;YACZ,aAAa,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK;SAChC,CAAC,CAAC;QAEH,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;IACrB,CAAC;IAEO,2BAAU,GAAlB,UAAmB,KAAoB;QACrC,IAAM,KAAK,GAAW,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;QACvC,IAAA,eAA+C,EAAvC,YAAG,EAAE,YAAG,EAAE,cAAI,EAAE,sBAAQ,CAAgB;QAEhD,IAAI,IAAI,GAAW,CAAC,CAAC;QACrB,EAAE,CAAC,CAAC,KAAK,CAAC,KAAK,KAAK,uBAAiB,CAAC,mBAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACrD,IAAI,GAAG,CAAC,IAAI,CAAC;QACf,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,KAAK,KAAK,uBAAiB,CAAC,mBAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAC7D,IAAI,GAAG,IAAI,CAAC;QACd,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,CAAC;QACT,CAAC;QACD,IAAM,QAAQ,GAAW,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC;QAEpE,IAAI,CAAC,QAAQ,CAAC;YACZ,KAAK,EAAE,QAAQ;YACf,aAAa,EAAE,QAAQ;SACxB,CAAC,CAAC;QAEH,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;YACb,QAAQ,CAAC,QAAQ,CAAC,CAAC;QACrB,CAAC;QAED,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,KAAK,CAAC,eAAe,EAAE,CAAC;IAC1B,CAAC;IAhNa,mBAAY,GAAO;QAC/B,IAAI,EAAE,CAAC;QACP,GAAG,EAAE,CAAC;QACN,GAAG,EAAE,EAAE;QACP,SAAS,EAAE,IAAI;QACf,QAAQ,EAAE,KAAK;KAChB,CAAC;IA4MJ,aAAC;AAAD,CAnNA,AAmNC,CAnN2B,6BAAa,GAmNxC;AAnNY,cAAM,SAmNlB,CAAA","file":"components/Slider/Slider.js","sourcesContent":["import * as React from 'react';\nimport './Slider.scss';\nimport { ISliderProps, ISlider } from './Slider.Props';\nimport { BaseComponent } from '../../common/BaseComponent';\nimport { KeyCodes } from '../../utilities/KeyCodes';\nimport { Label } from '../../Label';\nimport { css } from '../../utilities/css';\nimport { getRTL as isRTL, getRTLSafeKeyCode } from '../../utilities/rtl';\nimport { getId } from '../../utilities/object';\n\nexport interface ISliderState {\n  value?: number;\n  renderedValue?: number;\n}\n\nexport enum ValuePosition {\n  Previous,\n  Next\n}\n\nexport class Slider extends BaseComponent<ISliderProps, ISliderState> implements ISlider {\n  public static defaultProps: {} = {\n    step: 1,\n    min: 0,\n    max: 10,\n    showValue: true,\n    disabled: false\n  };\n\n  public refs: {\n    [key: string]: React.ReactInstance,\n    root: HTMLElement,\n    sliderLine: HTMLElement,\n    thumb: HTMLElement\n  };\n\n  private _id: string;\n\n  constructor(props?: ISliderProps) {\n    super(props);\n\n    this._onMouseDownOrTouchStart = this._onMouseDownOrTouchStart.bind(this);\n    this._onMouseMoveOrTouchMove = this._onMouseMoveOrTouchMove.bind(this);\n    this._onMouseUpOrTouchEnd = this._onMouseUpOrTouchEnd.bind(this);\n    this._onKeyDown = this._onKeyDown.bind(this);\n\n    this._id = getId('Slider');\n\n    let value = props.value || props.defaultValue || props.min;\n\n    this.state = {\n      value: value,\n      renderedValue: value\n    };\n  }\n\n  /**\n   * Invoked when a component is receiving new props. This method is not called for the initial render.\n   */\n  public componentWillReceiveProps(newProps: ISliderProps): void {\n\n    if (newProps.value !== undefined) {\n      let value = Math.max(newProps.min, Math.min(newProps.max, newProps.value));\n\n      this.setState({\n        value: value\n      });\n    }\n  }\n\n  public render(): React.ReactElement<{}> {\n    const { min, max, label, showValue, disabled, className, ariaLabel } = this.props;\n    const { value, renderedValue } = this.state;\n    const thumbOffsetPercent: number = (renderedValue - min) / (max - min) * 100;\n\n    const onMouseDownProp: {} = disabled ? {} : { onMouseDown: this._onMouseDownOrTouchStart };\n    const onTouchStartProp: {} = disabled ? {} : { onTouchStart: this._onMouseDownOrTouchStart };\n    const onKeyDownProp: {} = disabled ? {} : { onKeyDown: this._onKeyDown };\n\n    return (\n      <div\n        className={ css('ms-Slider', className, {\n          'ms-Slider-enabled': !disabled,\n          'ms-Slider-disabled': disabled\n        })}\n        ref='root'>\n        { label && (\n        <Label { ...ariaLabel ? {} : {'htmlFor' : this._id} }>\n          { label }\n        </Label>\n        ) }\n        <div className='ms-Slider-container'>\n          <div\n            className={ css('ms-Slider-slideBox', {\n              'ms-Slider-showValue': showValue,\n              'ms-Slider-showTransitions': ( renderedValue === value )\n            })}\n            { ...disabled ? { } : { 'tabIndex': 0 } }\n            id={ this._id }\n            role='slider'\n            aria-valuenow={ value }\n            aria-valuemin={ min }\n            aria-valuemax={ max }\n            { ...onMouseDownProp }\n            { ...onTouchStartProp }\n            { ...onKeyDownProp }\n            >\n            <div\n              ref='sliderLine'\n              className='ms-Slider-line'\n            >\n              <span\n                ref='thumb'\n                className='ms-Slider-thumb'\n                { ...ariaLabel ? { 'aria-label' : ariaLabel } : { } }\n                style={ isRTL() ?\n                  { 'right': thumbOffsetPercent + '%' } :\n                  { 'left': thumbOffsetPercent + '%' } }\n              />\n              <span className='ms-Slider-active' style={ {'width': thumbOffsetPercent + '%'} }></span>\n              <span className='ms-Slider-inactive' style={ {'width': (100 - thumbOffsetPercent) + '%'} }></span>\n            </div>\n          </div>\n          { showValue && <label className='ms-Label ms-Slider-value'>{ value }</label> }\n        </div>\n      </div>\n    ) as React.ReactElement<{}>;\n  }\n\n  public focus(): void {\n      if (this.refs.thumb) {\n          this.refs.thumb.focus();\n      }\n  }\n\n  public get value(): number {\n    return this.state.value;\n  }\n\n  private _onMouseDownOrTouchStart(event: MouseEvent | TouchEvent): void {\n    if (event.type === 'mousedown') {\n      this._events.on(window, 'mousemove', this._onMouseMoveOrTouchMove, true);\n      this._events.on(window, 'mouseup', this._onMouseUpOrTouchEnd, true);\n    } else if (event.type === 'touchstart') {\n      this._events.on(window, 'touchmove', this._onMouseMoveOrTouchMove, true);\n      this._events.on(window, 'touchend', this._onMouseUpOrTouchEnd, true);\n    }\n\n    this._onMouseMoveOrTouchMove(event, true);\n  }\n\n  private _onMouseMoveOrTouchMove(event: MouseEvent | TouchEvent, suppressEventCancelation?: boolean): void {\n    const { max, min, step, onChange } = this.props;\n    const steps: number = (max - min) / step;\n    const sliderLength: number = this.refs.sliderLine.offsetWidth;\n    const stepLength: number = sliderLength / steps;\n    const sliderPositionRect: ClientRect = this.refs.sliderLine.getBoundingClientRect();\n    let currentSteps: number;\n\n    if (event.type === 'mousedown' || event.type === 'mousemove') {\n      currentSteps = isRTL() ?\n        (sliderPositionRect.right - (event as MouseEvent).clientX) / stepLength :\n        ((event as MouseEvent).clientX - sliderPositionRect.left) / stepLength;\n    } else if (event.type === 'touchstart' || event.type === 'touchmove') {\n      currentSteps = isRTL() ?\n        (sliderPositionRect.right - (event as TouchEvent).touches[0].clientX) / stepLength :\n        ((event as TouchEvent).touches[0].clientX - sliderPositionRect.left) / stepLength;\n    }\n\n    let currentValue: number;\n    let renderedValue: number;\n\n    // The value shouldn't be bigger than max or be smaller than min.\n    if (currentSteps > Math.floor(steps)) {\n      renderedValue = currentValue = max;\n    } else if (currentSteps < 0) {\n      renderedValue = currentValue = min;\n    } else {\n      renderedValue = min + step * currentSteps;\n      currentValue = min + step * Math.round(currentSteps);\n    }\n\n    this.setState({\n      value: currentValue,\n      renderedValue: renderedValue\n    });\n    if (onChange) {\n      onChange(currentValue);\n    }\n\n    if (!suppressEventCancelation) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  private _onMouseUpOrTouchEnd(): void {\n    this.setState({\n      renderedValue: this.state.value\n    });\n\n    this._events.off();\n  }\n\n  private _onKeyDown(event: KeyboardEvent): void {\n    const value: number = this.state.value;\n    const { max, min, step, onChange } = this.props;\n\n    let diff: number = 0;\n    if (event.which === getRTLSafeKeyCode(KeyCodes.left)) {\n      diff = -step;\n    } else if (event.which === getRTLSafeKeyCode(KeyCodes.right)) {\n      diff = step;\n    } else {\n      return;\n    }\n    const newValue: number = Math.min(max, Math.max(min, value + diff));\n\n    this.setState({\n      value: newValue,\n      renderedValue: newValue\n    });\n\n    if (onChange) {\n      onChange(newValue);\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n}"],"sourceRoot":"/src"}