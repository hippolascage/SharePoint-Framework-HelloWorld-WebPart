{"version":3,"sources":["CopyTask.ts"],"names":[],"mappings":";;;;;;AAAA,yBAAyB,YAAY,CAAC,CAAA;AAStC;IAA8B,4BAAqB;IAAnD;QAA8B,8BAAqB;QAC1C,eAAU,GAAgB;YAC/B,MAAM,EAAE,EAAE;SACX,CAAC;IA6BJ,CAAC;IA3BQ,8BAAW,GAAlB,UACE,IAAe,EACf,gBAAwC;QAExC,IAAI,OAAO,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;QACtC,IAAI,KAAK,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;QACxB,mCAAM,CAAqB;QACjC,IAAI,UAAU,GAAG,EAAE,CAAC;QAEpB;YACE,EAAE,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;gBACpC,IAAI,OAAO,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC;gBAE/B,OAAO,CAAC,OAAO,CAAC,UAAA,WAAW,IAAI,OAAA,UAAU,CAAC,IAAI,CAC5C,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC;qBAClB,IAAI,CAAC,OAAO,EAAE,CAAC;qBACf,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAC7B,EAJ8B,CAI9B,CAAC,CAAC;YACL,CAAC;;QATH,GAAG,CAAC,CAAC,IAAI,QAAQ,IAAI,MAAM,CAAC;;SAU3B;QAED,EAAE,CAAC,CAAC,UAAU,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YAC5B,gBAAgB,EAAE,CAAC;QACrB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;QAC3B,CAAC;IACH,CAAC;IACH,eAAC;AAAD,CAhCA,AAgCC,CAhC6B,mBAAQ,GAgCrC;AAhCY,gBAAQ,WAgCpB,CAAA","file":"CopyTask.js","sourcesContent":["import { GulpTask } from './GulpTask';\nimport gulp = require('gulp');\n\nexport interface ICopyConfig {\n  copyTo: {\n    [destPath: string]: string[];\n  };\n}\n\nexport class CopyTask extends GulpTask<ICopyConfig> {\n  public taskConfig: ICopyConfig = {\n    copyTo: {}\n  };\n\n  public executeTask(\n    gulp: gulp.Gulp,\n    completeCallback: (result?: any) => void\n  ): Promise<any> | NodeJS.ReadWriteStream | void {\n    let flatten = require('gulp-flatten');\n    let merge = require('merge2');\n    let { copyTo } = this.taskConfig;\n    let allStreams = [];\n\n    for (let copyDest in copyTo) {\n      if (copyTo.hasOwnProperty(copyDest)) {\n        let sources = copyTo[copyDest];\n\n        sources.forEach(sourceMatch => allStreams.push(\n          gulp.src(sourceMatch)\n            .pipe(flatten())\n            .pipe(gulp.dest(copyDest))\n        ));\n      }\n    }\n\n    if (allStreams.length === 0) {\n      completeCallback();\n    } else {\n      return merge(allStreams);\n    }\n  }\n}\n\n"],"sourceRoot":"/source/"}