{"version":3,"sources":["index.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["'use strict';\n\n/* tslint:disable:max-line-length */\n\nimport { GulpProxy } from './GulpProxy';\nimport { IExecutable } from './IExecutable';\nimport { IBuildConfig } from './IBuildConfig';\nimport { NukeTask } from './NukeTask';\nimport { args } from './State';\nexport { IExecutable } from './IExecutable';\nimport { initialize as initializeLogging, markTaskCreationTime, generateGulpError, setWatchMode } from './logging';\nimport { getFlagValue, setConfigDefaults } from './config';\nimport gulpType = require('gulp');\nexport * from './GulpTask';\nexport * from './CopyTask';\nexport * from './NukeTask';\nexport * from './logging';\n\n/* tslint:disable:variable-name */\nrequire('es6-promise').polyfill();\n/* tslint:enable:variable-name */\n\nlet path = require('path');\nlet packageJSON = require(path.resolve(process.cwd(), 'package.json'));\n\nlet _taskMap = {} as { [key: string]: IExecutable };\nlet _uniqueTasks = [];\n\nlet _buildConfig: IBuildConfig = {\n  distFolder: 'dist',\n  libAMDFolder: null,\n  libFolder: 'lib',\n  tempFolder: 'temp',\n  properties: {},\n  relogIssues: getFlagValue('relogIssues', true),\n  showToast: getFlagValue('showToast', true),\n  buildSuccessIconPath: path.resolve(__dirname, 'pass.png'),\n  buildErrorIconPath: path.resolve(__dirname, 'fail.png'),\n  verbose: getFlagValue('verbose', false),\n  production: getFlagValue('production', false),\n  args: args\n};\n\n/**\n * Merges the given build config settings into existing settings.\n *\n * @param  {IBuildConfig} The build config settings.\n */\nexport function setConfig(config: IBuildConfig) {\n  let merge = require('lodash.merge');\n\n  _buildConfig = merge({}, _buildConfig, config);\n}\n\n/**\n * Replaces the build config.\n *\n * @param  {IBuildConfig} config\n */\nexport function replaceConfig(config: IBuildConfig) {\n  _buildConfig = config;\n}\n\n/**\n * Defines a gulp task and maps it to a given IExecutable.\n *\n * @param  {string} taskName\n * @param  {IExecutable} task\n * @returns IExecutable\n */\nexport function task(taskName: string, task: IExecutable): IExecutable {\n  _taskMap[taskName] = task;\n\n  _trackTask(task);\n\n  return task;\n}\n\n/**\n * Defines a gulp watch and maps it to a given IExecutable.\n *\n * @param  {string} watchMatch\n * @param  {IExecutable} task\n * @returns IExecutable\n */\nexport function watch(watchMatch: string | string[], task: IExecutable): IExecutable {\n  const notifier = require('node-notifier');\n  _trackTask(task);\n\n  let isWatchRunning = false;\n  let shouldRerunWatch = false;\n  let lastError = null;\n\n  return {\n    execute: (buildConfig: IBuildConfig) => {\n\n      setWatchMode();\n      buildConfig.gulp.watch(watchMatch, _runWatch);\n\n      function _runWatch() {\n        if (isWatchRunning) {\n          shouldRerunWatch = true;\n        } else {\n          isWatchRunning = true;\n\n          _executeTask(task, buildConfig)\n            .then(() => {\n              if (buildConfig.showToast && lastError) {\n                lastError = null;\n\n                notifier.notify({\n                  title: 'Build succeeded',\n                  message: packageJSON.name,\n                  icon: buildConfig.buildSuccessIconPath\n                });\n              }\n              _finalizeWatch();\n            })\n            .catch((error) => {\n              if (buildConfig.showToast) {\n                if (!lastError || lastError !== error) {\n                  lastError = error;\n                  notifier.notify({\n                    title: 'Build failed',\n                    message: error,\n                    icon: buildConfig.buildErrorIconPath\n                  });\n                }\n              }\n              _finalizeWatch();\n            });\n        }\n      }\n\n      function _finalizeWatch() {\n        isWatchRunning = false;\n\n        if (shouldRerunWatch) {\n          shouldRerunWatch = false;\n          _runWatch();\n        }\n      }\n\n      return Promise.resolve<void>();\n    }\n  };\n}\n\n/**\n * Takes in IExecutables as arguments and returns an IExecutable that will execute them in serial.\n *\n * @param  {IExecutable[]} ...tasks\n * @returns IExecutable\n */\nexport function serial(...tasks: Array<IExecutable[] | IExecutable>): IExecutable {\n  let flatTasks = <IExecutable[]>_flatten(tasks);\n\n  for (let task of flatTasks) {\n    _trackTask(task);\n  }\n\n  return {\n    execute: (buildConfig: IBuildConfig) => {\n      let output = Promise.resolve<void>();\n\n      for (let task of flatTasks) {\n        output = output.then(() => _executeTask(task, buildConfig));\n      }\n\n      return output;\n    }\n  };\n}\n\n/**\n * Takes in IExecutables as arguments and returns an IExecutable that will execute them in parallel.\n *\n * @param  {IExecutable[]} ...tasks\n * @returns IExecutable\n */\nexport function parallel(...tasks: Array<IExecutable[] | IExecutable>): IExecutable {\n  let flattenTasks = _flatten(tasks);\n\n  for (let task of flattenTasks) {\n    _trackTask(task);\n  }\n\n  return {\n    execute: (buildConfig: IBuildConfig): Promise<void> => {\n      return new Promise<any>((resolve, reject) => {\n        let promises: Promise<void>[] = [];\n        for (let task of flattenTasks) {\n          promises.push(_executeTask(task, buildConfig));\n        }\n\n        // Use promise all to make sure errors are propagated correctly\n        Promise.all<void>(promises).then(resolve, reject);\n      });\n    }\n  };\n}\n\n/**\n * Initializes the gulp tasks.\n *\n * @param  {any} gulp\n */\nexport function initialize(gulp: any) {\n  _buildConfig.rootPath = process.cwd();\n  _buildConfig.gulp = new GulpProxy(gulp);\n  _buildConfig.uniqueTasks = _uniqueTasks;\n\n  setConfigDefaults(_buildConfig);\n\n  initializeLogging(gulp, null, null);\n\n  Object.keys(_taskMap).forEach(taskName => _registerTask(gulp, taskName, _taskMap[taskName]));\n\n  markTaskCreationTime();\n}\n\n/**\n * Registers a given gulp task given a name and an IExecutable.\n *\n * @param  {any} gulp\n * @param  {string} taskName\n * @param  {IExecutable} task\n */\nfunction _registerTask(gulp: gulpType.Gulp, taskName: string, task: IExecutable) {\n  gulp.task(taskName, (cb) => {\n    _executeTask(task, _buildConfig)\n      .then(() => {\n        cb();\n      },\n      (error: any) => {\n        cb(generateGulpError(error));\n      });\n  });\n}\n\n/**\n * Executes a given IExecutable.\n *\n * @param  {IExecutable} task\n * @param  {IBuildConfig} buildConfig\n * @returns Promise\n */\nfunction _executeTask(task: IExecutable, buildConfig: IBuildConfig): Promise<void> {\n  // Try to fallback to the default task if provided.\n  if (task && !task.execute) {\n    if ((task as any).default) {\n      task = (task as any).default;\n    }\n  }\n\n  // If the task is missing, throw a meaningful error.\n  if (!task || !task.execute) {\n    return Promise.reject(new Error(`A task was scheduled, but the task was null. This probably means the task wasn't imported correctly.`));\n  }\n\n  if (task.isEnabled === undefined || task.isEnabled()) {\n    let startTime = process.hrtime();\n\n    if (buildConfig.onTaskStart && task.name) {\n      buildConfig.onTaskStart(task.name);\n    }\n\n    let taskPromise = task.execute(buildConfig)\n      .then(() => {\n        if (buildConfig.onTaskEnd && task.name) {\n          buildConfig.onTaskEnd(task.name, process.hrtime(startTime));\n        }\n      },\n      (error: any) => {\n        if (buildConfig.onTaskEnd && task.name) {\n          buildConfig.onTaskEnd(task.name, process.hrtime(startTime), error);\n        }\n\n        return Promise.reject(error);\n      });\n\n    return taskPromise;\n  }\n\n  // No-op otherwise.\n  return Promise.resolve<void>();\n}\n\nfunction _trackTask(task: IExecutable) {\n  if (_uniqueTasks.indexOf(task) < 0) {\n    _uniqueTasks.push(task);\n  }\n}\n\n/**\n * Flattens a set of arrays into a single array.\n *\n * @param  {any} arr\n */\nfunction _flatten<T>(arr: Array<T | T[]>) {\n  let output: T[] = [];\n\n  for (let toFlatten of arr) {\n    if (Array.isArray(toFlatten)) {\n      output = output.concat(toFlatten);\n    } else {\n      output.push(toFlatten);\n    }\n  }\n\n  return output;\n}\n\nexport let nuke = new NukeTask();\n\n// Register default nuke task.\ntask('nuke', nuke);\n"],"sourceRoot":"/source/"}